% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/RcppExports.R
\name{custom_metric}
\alias{custom_metric}
\title{Create a custom metric specification}
\usage{
custom_metric(
  name,
  metric_func,
  n_rows,
  n_cols = NULL,
  labels = NULL,
  require_lat = FALSE
)
}
\arguments{
\item{name}{String. Unique identifier for the metric.}

\item{metric_func}{Function. An R function that accepts the simulation
context list and returns a numeric vector.}

\item{n_rows}{Integer. Number of rows in the metric output.}

\item{n_cols}{Integer or NULL. Number of columns in the metric output
(default: 1).}

\item{labels}{Character vector or NULL. Labels for metric components
(default: empty).}

\item{require_lat}{Logical. Whether the metric requires linkage
disequilibrium tracking (default: FALSE).}
}
\value{
An external pointer to a MetricSpec object for use with
Simulation$metrics().
}
\description{
Defines a custom metric using an R function that computes values from the
simulation context. This allows users to extend the built-in metrics with
arbitrary calculations.
}
\details{
The provided R function receives a list containing the current simulation
state, including genome statistics, phenotype values and summary statistics,
and mating information. The function must return a numeric vector of length
\code{n_rows * n_cols}.

The context list passed to the metric function contains:
\describe{
\item{n_individuals}{Population size}
\item{n_loci}{Number of genetic loci}
\item{n_phenotypes}{Number of phenotypic traits}
\item{n_sex}{Number of individuals per sex}
\item{genome}{List with locus_mafs, locus_means, locus_vars}
\item{phenotypes}{Named list of phenotype data with component vectors
(genetic, environmental, vertical, total) and summary statistics}
\item{mating}{List containing mate_matching state}
}
}
